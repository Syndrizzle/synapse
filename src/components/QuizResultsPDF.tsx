import { Document, Page, Text, View, StyleSheet, Font, Svg, Path } from '@react-pdf/renderer';

Font.register({
  family: 'Instrument Serif',
  fonts: [
    {
      src: '../../public/fonts/Instrument_Serif/InstrumentSerif-Regular.ttf',
      fontWeight: 400,
      fontStyle: 'normal',
    }
  ],
});

Font.register({
  family: 'Space Grotesk',
  fonts: [
    {
      src: '../../public/fonts/Space_Grotesk/SpaceGrotesk-Light.ttf',
      fontWeight: 300,
      fontStyle: 'normal',
    },
    {
      src: '../../public/fonts/Space_Grotesk/SpaceGrotesk-Regular.ttf',
      fontWeight: 400,
      fontStyle: 'normal',
    },
    {
      src: '../../public/fonts/Space_Grotesk/SpaceGrotesk-Medium.ttf',
      fontWeight: 500,
      fontStyle: 'normal',
    },
    {
      src: '../../public/fonts/Space_Grotesk/SpaceGrotesk-SemiBold.ttf',
      fontWeight: 600,
      fontStyle: 'normal',
    },
    {
      src: '../../public/fonts/Space_Grotesk/SpaceGrotesk-Bold.ttf',
      fontWeight: 700,
      fontStyle: 'normal',
    }

  ],
});

interface QuestionResult {
  questionId: string;
  userAnswer: number | null;
  correctAnswer: number;
  isCorrect: boolean;
  question: string;
  options: string[];
  explanation: string;
  topic: string;
}

interface QuizResultsData {
  description: string;
  quizId: string;
  submittedAt: string;
  totalQuestions: number;
  correctAnswers: number;
  incorrectAnswers: number;
  score: number;
  percentage: number;
  timeTaken: number;
  questionResults: QuestionResult[];
  performance: 'excellent' | 'good' | 'average' | 'needs_improvement';
}

interface QuizResultsPDFProps {
  resultsData: QuizResultsData;
}

// Create styles
const styles = StyleSheet.create({
  page: {
    flexDirection: 'column',
    backgroundColor: '#171717',
    padding: 40,
    fontFamily: 'Space Grotesk',
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 32,
    fontFamily: 'Instrument Serif',
  },
  logo: {
    width: 40,
    height: 40,
    marginRight: 10,
  },
  title: {
    fontSize: 30,
    fontWeight: 'bold',
    color: '#22c55e',
    textAlign: 'center',
  },
  gridTitle: {
    fontSize: 30,
    fontWeight: 'bold',
    color: '#fafafa',
    textAlign: 'center',
    fontFamily: 'Instrument Serif',
    marginBottom: 20,
  },
  navGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
    marginBottom: 20,
    justifyContent: 'center',
  },
  navButton: {
    width: 60,
    height: 40,
    justifyContent: 'center',
    alignItems: 'center',
    fontWeight: 700,
    border: '2 solid #262626',
  },
  navButtonCorrect: {
    backgroundColor: '#22c55e',
    borderColor: '#16a34a',
  },
  navButtonIncorrect: {
    backgroundColor: '#ef4444',
    borderColor: '#dc2626',
  },
  navButtonNeutral: {
    backgroundColor: '#262626',
    borderColor: '#737373',
  },
  navButtonText: {
    fontSize: 12,
    fontWeight: 'bold',
    color: '#0a0a0a',
  },
  statsContainer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginBottom: 20,
    gap: 15,
  },
  statBox: {
    flex: 1,
    backgroundColor: '#262626',
    padding: 15,
    borderRadius: 8,
    alignItems: 'center',
  },
  navBox: {
    flex: 1,
    backgroundColor: '#171717',
    alignItems: 'center',
  },
  statLabel: {
    fontSize: 12,
    color: '#a3a3a3',
    marginBottom: 5,
  },
  statValue: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#fafafa',
  },
  statValueGreen: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#22c55e',
  },
  gradeContainer: {
    alignItems: 'center',
    backgroundColor: '#262626',
    padding: 20,
    borderRadius: 8,
    marginBottom: 20,
  },
  gradeLabel: {
    fontSize: 14,
    color: '#a3a3a3',
    marginBottom: 10,
  },
  gradeValue: {
    fontSize: 56,
    fontWeight: 'bold',
  },
  gradeA: {
    color: '#22c55e',
  },
  gradeB: {
    color: '#22c55e',
  },
  gradeC: {
    color: '#eab308',
  },
  gradeD: {
    color: '#ef4444',
  },
  questionContainer: {
    padding: 15,
    marginBottom: 20,
  },
  questionHeader: {
    flexDirection: 'row',
    justifyContent: 'flex-start',
    alignItems: 'center',
    marginBottom: 10,
    gap: 10,
  },
  questionNumber: {
    fontSize: 24,
    color: '#fafafa',
    fontFamily: 'Instrument Serif',
  },
  questionTopic: {
    fontSize: 10,
    color: '#a3a3a3',
    backgroundColor: '#404040',
    padding: '4 8',
    borderRadius: 6,
  },
  separator: {
    height: 1,
    backgroundColor: '#262626',
    marginTop: 8,
    marginBottom: 16,
  },
  questionText: {
    fontSize: 20,
    color: '#fafafa',
    marginBottom: 15,
  },
  optionsContainer: {
    marginBottom: 15,
  },
  option: {
    fontSize: 16,
    padding: '10 14',
    marginBottom: 10,
    borderWidth: 2,
    borderStyle: 'solid',
    borderColor: '#737373',
    backgroundColor: '#171717',
    color: '#fafafa',
  },
  optionCorrect: {
    backgroundColor: '#4ade80',
    borderColor: '#16a34a',
    color: '#171717',
  },
  optionIncorrect: {
    backgroundColor: '#f87171',
    borderColor: '#dc2626',
    color: '#171717',
  },
  optionNeutral: {
    backgroundColor: '#171717',
    borderColor: '#737373',
    color: '#fafafa',
  },
  answerInfo: {
    marginBottom: 10,
  },
  answerRow: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 6,
    marginBottom: 5,
  },
  correctAnswerRow: {
    flexDirection: 'column',
    justifyContent: 'center',
    gap: 6,
    marginBottom: 5,
  },
  answerLabel: {
    fontSize: 12,
    color: '#d4d4d4',
  },
  answerValue: {
    fontSize: 12,
    padding: '3 8',
    borderRadius: 6,
  },
  correctAnswerValue: {
    fontSize: 12,
    padding: '4 12',
    borderRadius: 6,
    alignSelf: 'flex-start',
  },
  answerCorrect: {
    backgroundColor: '#4ade8020',
    color: '#4ade80',
  },
  answerIncorrect: {
    backgroundColor: '#f8717120',
    color: '#f87171',
  },
  answerNotAttempted: {
    backgroundColor: '#a3a3a320',
    color: '#a3a3a3',
  },
  explanation: {
    backgroundColor: '#60a5fa20',
    padding: '14 18',
    borderRadius: 8,
  },
  explanationTitle: {
    fontSize: 16,
    fontWeight: 'bold',
    color: '#60a5fa',

  },
  explanationCheck: {
    width: 14,
    height: 14,
    stroke: '#60a5fa',
    strokeWidth: 2,
  },
  explanationHeader: {
    flexDirection: 'row',
    alignItems: 'center',
    marginBottom: 5,
    gap: 4,
  },
  explanationText: {
    fontSize: 14,
    color: '#fafafa',
  },
  footer: {
    position: 'absolute',
    bottom: 30,
    left: 30,
    right: 30,
    textAlign: 'center',
    gap: 6,
  },
  quizID: {
    fontSize: 12,
    color: '#525252',
  },
  timeSubmitted: {
    fontSize: 12,
    color: '#e5e5e5',
  },
  pageNumber: {
    position: 'absolute',
    bottom: 30,
    right: 30,
    fontSize: 10,
    color: '#525252',
  },
});

const formatTime = (seconds: number): string => {
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')} Mins`;
};

const formatDate = (isoString: string): string => {
  const date = new Date(isoString);
  return date.toLocaleDateString('en-GB', {
    day: '2-digit',
    month: 'short',
    year: 'numeric'
  }) + ', ' + date.toLocaleTimeString('en-US', {
    hour: '2-digit',
    minute: '2-digit',
    hour12: true
  });
};

const getGradeLetter = (performance: string): string => {
  switch (performance) {
    case 'excellent': return 'A';
    case 'good': return 'B';
    case 'average': return 'C';
    case 'needs_improvement': return 'D';
    default: return 'B';
  }
};

const getGradeStyle = (performance: string) => {
  switch (performance) {
    case 'excellent': return styles.gradeA;
    case 'good': return styles.gradeB;
    case 'average': return styles.gradeC;
    case 'needs_improvement': return styles.gradeD;
    default: return styles.gradeB;
  }
};

export const QuizResultsPDF = ({ resultsData }: QuizResultsPDFProps) => (
  <Document>
    {/* Summary Page */}
    <Page size="A4" style={styles.page}>
      {/* Header */}
      <View style={styles.header}>
        <Svg width="125" height="30" viewBox="0 0 163 39" fill="none" >
          <Path d="M54.9715 30.8246C54.4147 30.8246 53.7884 30.769 53.0924 30.6578C52.4242 30.5465 51.7839 30.4075 51.1715 30.2406C50.5868 30.0738 50.1275 29.893 49.7934 29.6984C49.5985 29.5872 49.4454 29.4759 49.3341 29.3647C49.2506 29.2257 49.2088 29.0032 49.2088 28.6973L49 22.1487C49 21.5925 49.181 21.3144 49.5429 21.3144C49.8491 21.3144 50.0579 21.5647 50.1693 22.0652L50.5451 23.6503C51.4916 27.6267 53.2594 29.615 55.8485 29.615C57.2404 29.615 58.3401 29.1562 59.1474 28.2385C59.9826 27.293 60.4002 25.9722 60.4002 24.2759C60.4002 22.6353 59.9687 21.1059 59.1057 19.6877C58.2705 18.2695 56.9203 16.8652 55.055 15.4749C52.9949 14.0011 51.4916 12.5829 50.5451 11.2203C49.5985 9.82995 49.1253 8.35615 49.1253 6.79893C49.1253 4.74118 49.8352 3.10053 51.255 1.877C52.7026 0.625668 54.54 0 56.7672 0C57.6023 0 58.4097 0.0973258 59.1892 0.291977C59.9687 0.486631 60.609 0.764706 61.1101 1.1262C61.2771 1.23743 61.4024 1.36257 61.4859 1.5016C61.5973 1.64064 61.653 1.82139 61.653 2.04385L61.7782 8.34225C61.7782 8.81497 61.5973 9.05134 61.2354 9.05134C60.9848 9.05134 60.8039 8.85668 60.6925 8.46738L60.4002 7.4246C59.7877 5.28342 59.1474 3.7262 58.4793 2.75294C57.839 1.75187 56.9064 1.25134 55.6814 1.25134C54.4843 1.25134 53.5239 1.64064 52.8001 2.41925C52.1041 3.19786 51.7561 4.29626 51.7561 5.71444C51.7561 6.91016 52.1458 8.05027 52.9253 9.13476C53.7048 10.2193 55.069 11.5401 57.0177 13.0973C59.1057 14.7936 60.6229 16.4342 61.5694 18.0193C62.5438 19.5765 63.031 21.2449 63.031 23.0246C63.031 24.5818 62.683 25.9444 61.987 27.1123C61.2911 28.2802 60.3306 29.1979 59.1057 29.8652C57.9086 30.5048 56.5305 30.8246 54.9715 30.8246Z" fill="#fafafa" />
          <Path d="M66.1085 39C65.3568 39 64.7582 38.7358 64.3128 38.2075C63.8674 37.707 63.6447 37.123 63.6447 36.4556C63.6447 35.9273 63.7978 35.4824 64.104 35.1209C64.4103 34.7594 64.8278 34.5786 65.3568 34.5786C65.8022 34.5786 66.1224 34.6759 66.3172 34.8706C66.5121 35.0652 66.6513 35.2877 66.7348 35.538C66.8184 35.7882 66.9019 36.0107 66.9854 36.2053C67.0689 36.4 67.2359 36.4973 67.4865 36.4973C67.7927 36.4973 68.0711 36.2749 68.3217 35.8299C68.5722 35.4128 68.9202 34.5091 69.3657 33.1187C69.644 32.2845 69.8111 31.5615 69.8668 30.9497C69.9503 30.338 69.9364 29.6845 69.825 28.9893C69.7415 28.2941 69.5327 27.446 69.1986 26.4449L64.6469 11.9711C64.452 11.3037 64.2571 10.8727 64.0623 10.6781C63.8952 10.4834 63.6168 10.3444 63.2271 10.261L62.6007 10.1358C62.2388 10.0524 62.0578 9.87166 62.0578 9.59358C62.0578 9.31551 62.2527 9.17647 62.6425 9.17647H69.5327C69.9224 9.17647 70.1173 9.31551 70.1173 9.59358C70.1173 9.89946 69.9364 10.0802 69.5744 10.1358L68.9063 10.2193C68.2382 10.3027 67.8066 10.4695 67.6118 10.7198C67.4447 10.9422 67.4587 11.3594 67.6535 11.9711L71.3283 24.1925C71.4118 24.4706 71.5371 24.6096 71.7042 24.6096C71.899 24.6096 72.0382 24.4706 72.1217 24.1925L75.6713 12.7219C75.894 11.9711 75.9496 11.415 75.8383 11.0535C75.7548 10.6642 75.365 10.4139 74.669 10.3027L73.7921 10.1358C73.4302 10.0524 73.2492 9.87166 73.2492 9.59358C73.2492 9.31551 73.4441 9.17647 73.8339 9.17647H79.1372C79.527 9.17647 79.7219 9.32941 79.7219 9.63529C79.7219 9.91337 79.5548 10.108 79.2208 10.2193L78.8449 10.3444C78.4273 10.4834 78.0794 10.7337 77.801 11.0952C77.5226 11.4567 77.2303 12.0824 76.924 12.9722L70.7019 32.3679C70.0895 34.3144 69.5327 35.7604 69.0316 36.7059C68.5583 37.6513 68.099 38.2631 67.6535 38.5412C67.2081 38.8471 66.6931 39 66.1085 39Z" fill="#fafafa" />
          <Path d="M79.2498 30.4492C78.8322 30.4492 78.6234 30.2963 78.6234 29.9904C78.6234 29.7401 78.8044 29.5733 79.1663 29.4898L79.6674 29.4064C80.252 29.2952 80.6278 29.1283 80.7949 28.9059C80.9898 28.6556 81.0872 28.2385 81.0872 27.6545V13.6396C81.0872 13.139 81.0037 12.8053 80.8366 12.6385C80.6974 12.4439 80.433 12.3187 80.0432 12.2631L79.1663 12.138C78.8044 12.1102 78.6234 11.9572 78.6234 11.6791C78.6234 11.4567 78.8461 11.3037 79.2916 11.2203C80.1546 11.0813 80.8088 10.8588 81.2542 10.5529C81.7275 10.2471 82.2147 9.87166 82.7158 9.42674C82.9663 9.17647 83.1751 9.05134 83.3422 9.05134C83.5927 9.05134 83.718 9.21818 83.718 9.55187V11.4289C83.718 11.6791 83.8015 11.846 83.9686 11.9294C84.1634 11.985 84.3722 11.9016 84.5949 11.6791C85.7085 10.6225 86.6829 9.89946 87.5181 9.51016C88.3811 9.12085 89.2859 8.9262 90.2324 8.9262C91.4852 8.9262 92.4874 9.37112 93.2391 10.261C93.9907 11.123 94.3665 12.4021 94.3665 14.0984V27.6545C94.3665 28.2385 94.4501 28.6556 94.6171 28.9059C94.812 29.1283 95.2017 29.2813 95.7863 29.3647L96.705 29.4898C97.0113 29.5455 97.1644 29.7123 97.1644 29.9904C97.1644 30.2963 96.9974 30.4492 96.6633 30.4492H89.6478C89.258 30.4492 89.0632 30.2963 89.0632 29.9904C89.0632 29.7123 89.2163 29.5455 89.5225 29.4898L90.1071 29.4064C90.6918 29.323 91.0676 29.1561 91.2346 28.9059C91.4295 28.6556 91.5269 28.2385 91.5269 27.6545V14.5572C91.5269 13.1947 91.2764 12.2353 90.7753 11.6791C90.2742 11.123 89.5643 10.8449 88.6456 10.8449C87.7547 10.8449 86.9474 11.1091 86.2235 11.6374C85.5276 12.138 84.9708 12.8193 84.5532 13.6813C84.1356 14.5155 83.9268 15.4471 83.9268 16.4759V27.6545C83.9268 28.2385 84.0103 28.6556 84.1774 28.9059C84.3722 29.1561 84.762 29.3091 85.3466 29.3647L86.4741 29.4898C86.7803 29.5455 86.9334 29.6984 86.9334 29.9487C86.9334 30.2824 86.7247 30.4492 86.3071 30.4492H79.2498Z" fill="#fafafa" />
          <Path d="M101.788 30.8246C100.619 30.8246 99.6585 30.4631 98.9068 29.7401C98.1552 28.9893 97.7794 28.0021 97.7794 26.7786C97.7794 25.5829 98.1552 24.4567 98.9068 23.4C99.6585 22.3155 100.689 21.3422 101.997 20.4802C103.305 19.6182 104.795 18.923 106.465 18.3947C106.827 18.2834 107.008 18.0471 107.008 17.6856V13.8898C107.008 12.5551 106.799 11.6096 106.382 11.0535C105.964 10.4695 105.393 10.1775 104.67 10.1775C103.974 10.1775 103.333 10.4973 102.749 11.1369C102.192 11.7487 101.788 12.7914 101.538 14.2652C101.398 15.1551 101.092 15.8086 100.619 16.2257C100.174 16.615 99.7142 16.8096 99.2409 16.8096C98.4614 16.8096 98.0717 16.4203 98.0717 15.6417C98.0717 14.8353 98.2944 14.0428 98.7398 13.2642C99.2131 12.4578 99.8255 11.7348 100.577 11.0952C101.329 10.4278 102.15 9.89946 103.041 9.51016C103.932 9.12085 104.823 8.9262 105.714 8.9262C108.47 8.9262 109.848 10.5251 109.848 13.723V26.4866C109.848 27.6545 110.14 28.2385 110.725 28.2385C111.087 28.2385 111.421 28.0021 111.727 27.5294C112.033 27.0289 112.186 26.1947 112.186 25.0267C112.186 24.5818 112.367 24.3594 112.729 24.3594C113.063 24.3594 113.23 24.5957 113.23 25.0684C113.23 27.0984 112.868 28.5722 112.144 29.4898C111.448 30.3797 110.655 30.8246 109.764 30.8246C109.096 30.8246 108.567 30.5604 108.177 30.0321C107.788 29.4759 107.523 28.8225 107.384 28.0717C107.356 27.7936 107.231 27.6545 107.008 27.6545C106.813 27.6267 106.618 27.7519 106.423 28.0299C105.755 28.9476 105.073 29.6428 104.377 30.1155C103.681 30.5882 102.818 30.8246 101.788 30.8246ZM102.916 28.9059C103.64 28.9059 104.308 28.6556 104.92 28.1551C105.533 27.6267 106.034 26.9315 106.423 26.0695C106.813 25.2075 107.008 24.2342 107.008 23.1497V20.1048C107.008 19.5765 106.716 19.4235 106.131 19.646C104.433 20.2578 103.111 21.1059 102.164 22.1904C101.245 23.2471 100.786 24.5262 100.786 26.0278C100.786 27.9465 101.496 28.9059 102.916 28.9059Z" fill="#fafafa" />
          <Path d="M113.749 39C113.331 39 113.122 38.8471 113.122 38.5412C113.122 38.2353 113.303 38.0684 113.665 38.0406L114.25 37.9572C114.834 37.8738 115.21 37.707 115.377 37.4567C115.572 37.2064 115.669 36.7893 115.669 36.2053V13.6396C115.669 13.139 115.586 12.8053 115.419 12.6385C115.28 12.4439 115.015 12.3187 114.626 12.2631L113.749 12.138C113.387 12.1102 113.206 11.9572 113.206 11.6791C113.206 11.4567 113.428 11.3037 113.874 11.2203C114.737 11.0813 115.391 10.8588 115.837 10.5529C116.31 10.2471 116.797 9.87166 117.298 9.42674C117.549 9.17647 117.757 9.05134 117.924 9.05134C118.175 9.05134 118.3 9.21818 118.3 9.55187V10.8449C118.3 11.0396 118.384 11.1786 118.551 11.262C118.718 11.3176 118.913 11.2342 119.135 11.0118L119.595 10.5529C120.152 9.99679 120.722 9.59358 121.307 9.34331C121.892 9.06524 122.56 8.9262 123.311 8.9262C124.592 8.9262 125.719 9.35722 126.694 10.2193C127.696 11.0535 128.476 12.2214 129.032 13.723C129.617 15.2246 129.909 16.9904 129.909 19.0203C129.909 21.3283 129.547 23.3722 128.824 25.1519C128.1 26.9315 127.098 28.3219 125.817 29.323C124.564 30.3241 123.117 30.8246 121.474 30.8246C120.639 30.8246 119.901 30.6717 119.261 30.3658C118.76 30.1433 118.509 30.2963 118.509 30.8246V36.2053C118.509 36.7893 118.593 37.1786 118.76 37.3733C118.955 37.5957 119.344 37.7487 119.929 37.8321L121.474 38.0406C121.78 38.0963 121.933 38.2492 121.933 38.4995C121.933 38.8332 121.725 39 121.307 39H113.749ZM121.599 29.7818C123.158 29.7818 124.411 28.8642 125.358 27.0289C126.332 25.1936 126.819 22.7187 126.819 19.6043C126.819 16.7401 126.402 14.5572 125.566 13.0556C124.731 11.554 123.548 10.8032 122.017 10.8032C121.07 10.8032 120.249 11.1925 119.553 11.9711C118.857 12.7497 118.509 13.8342 118.509 15.2246V25.7358C118.509 26.9872 118.787 27.9743 119.344 28.6973C119.929 29.4203 120.681 29.7818 121.599 29.7818Z" fill="#fafafa" />
          <Path d="M135.811 30.8246C135.171 30.8246 134.489 30.7412 133.765 30.5743C133.041 30.4353 132.457 30.2545 132.011 30.0321C131.761 29.893 131.635 29.6567 131.635 29.323L131.51 24.6513C131.51 24.1786 131.691 23.9422 132.053 23.9422C132.359 23.9422 132.568 24.1647 132.679 24.6096C133.153 26.584 133.723 27.9326 134.392 28.6556C135.088 29.3786 135.923 29.7401 136.897 29.7401C137.704 29.7401 138.373 29.4342 138.901 28.8225C139.43 28.1829 139.695 27.307 139.695 26.1947C139.695 25.0824 139.389 24.0952 138.776 23.2332C138.164 22.3711 137.134 21.4257 135.686 20.3968C134.238 19.4235 133.181 18.4503 132.512 17.477C131.844 16.4759 131.51 15.3914 131.51 14.2235C131.51 12.6385 132.067 11.3594 133.181 10.3861C134.294 9.41283 135.77 8.9262 137.607 8.9262C138.164 8.9262 138.707 8.99572 139.236 9.13476C139.765 9.24599 140.238 9.44064 140.655 9.71872C140.906 9.88556 141.031 10.108 141.031 10.3861L141.115 14.9743C141.115 15.3914 140.948 15.6 140.614 15.6C140.419 15.6 140.28 15.5444 140.196 15.4332C140.112 15.2941 140.043 15.1273 139.987 14.9326C139.43 13.1251 138.874 11.8738 138.317 11.1786C137.76 10.4556 137.078 10.0941 136.271 10.0941C135.547 10.0941 134.948 10.3444 134.475 10.8449C134.002 11.3455 133.765 11.9711 133.765 12.7219C133.765 13.6952 134.057 14.5433 134.642 15.2663C135.227 15.9893 136.285 16.8791 137.816 17.9358C139.208 18.9369 140.252 20.0214 140.948 21.1893C141.671 22.3294 142.033 23.5807 142.033 24.9433C142.033 26.723 141.463 28.1551 140.321 29.2396C139.18 30.2963 137.677 30.8246 135.811 30.8246Z" fill="#fafafa" />
          <Path d="M150.369 30.8246C149.033 30.8246 147.836 30.3797 146.778 29.4898C145.72 28.6 144.871 27.3487 144.231 25.7358C143.618 24.0952 143.312 22.2043 143.312 20.0631C143.312 17.8663 143.632 15.9337 144.272 14.2652C144.913 12.5968 145.79 11.2898 146.903 10.3444C148.017 9.39893 149.256 8.9262 150.62 8.9262C152.262 8.9262 153.585 9.60749 154.587 10.9701C155.617 12.3048 156.132 14.4877 156.132 17.5187C156.132 18.4364 155.784 18.8952 155.088 18.8952H147.154C146.597 18.8952 146.319 19.215 146.319 19.8545C146.319 22.8021 146.75 25.0128 147.613 26.4866C148.476 27.9604 149.576 28.6973 150.912 28.6973C151.97 28.6973 152.833 28.3219 153.501 27.5711C154.169 26.8203 154.712 25.5551 155.13 23.7754C155.213 23.4695 155.394 23.3166 155.673 23.3166C156.007 23.3166 156.132 23.5947 156.048 24.1508C155.603 26.6257 154.893 28.3636 153.919 29.3647C152.944 30.338 151.761 30.8246 150.369 30.8246ZM147.028 17.8524H151.246C152.582 17.8524 153.251 17.1572 153.251 15.7668C153.251 13.9594 153.028 12.5412 152.582 11.5123C152.137 10.4834 151.469 9.96898 150.578 9.96898C149.492 9.96898 148.574 10.5947 147.822 11.846C147.098 13.0973 146.625 14.877 146.402 17.185C146.346 17.6299 146.555 17.8524 147.028 17.8524Z" fill="#fafafa" />
          <Path d="M160.829 30.8246C160.216 30.8246 159.687 30.6299 159.242 30.2406C158.824 29.8235 158.615 29.2813 158.615 28.6139C158.615 27.9743 158.824 27.4599 159.242 27.0706C159.687 26.6535 160.216 26.4449 160.829 26.4449C161.385 26.4449 161.886 26.6535 162.332 27.0706C162.777 27.4599 163 27.9743 163 28.6139C163 29.2813 162.777 29.8235 162.332 30.2406C161.886 30.6299 161.385 30.8246 160.829 30.8246Z" fill="#fafafa" />
          <Path d="M30.6001 5.86153C30.2125 5.86755 29.8057 5.80538 29.422 5.75004C26.1974 5.28506 23.0102 3.66025 20.6352 1.44723C20.1584 1.00292 19.6758 0.522928 19.2852 0C23.7036 0.576102 27.6147 2.50947 30.6001 5.86153Z" fill="#fafafa" />
          <Path d="M4.17509 6.22432C4.56644 5.74935 5.0001 5.33017 5.44367 4.90515C8.0815 2.36788 11.4259 0.691818 15.035 0.0984678C15.0583 0.0940004 15.0902 0.0871127 15.1134 0.0866163C15.2781 0.083514 15.4632 0.451636 15.5648 0.588635C16.2331 1.50153 17.0011 2.33673 17.8547 3.07881C21.7124 6.44334 26.9367 8.03837 32.0176 7.68644C33.627 9.97813 34.63 12.641 34.9327 15.4264C31.2297 16.116 27.9646 15.8397 24.6964 13.8274C23.558 13.0996 22.468 12.2462 21.6 11.2018C21.1477 10.6573 20.7707 10.063 20.2988 9.53059C18.6779 7.71666 16.6289 6.33861 14.339 5.52251C10.8093 4.29145 7.50721 4.60658 4.17509 6.22432Z" fill="#fafafa" />
          <Path d="M0 15.8657C0.0117088 15.4471 0.102654 15.0108 0.173588 14.5986C0.521631 12.5032 1.29559 10.5016 2.44745 8.71784C2.59062 8.49404 2.7188 8.24585 2.88464 8.03949C3.31198 7.50763 5.07636 6.90149 5.74407 6.73887C6.2084 6.62576 6.67892 6.56284 7.1544 6.52245C7.65887 6.4601 8.22491 6.48957 8.7318 6.52102C11.8842 6.7166 14.6465 8.28166 16.8155 10.5114C17.2968 11.0063 17.6758 11.5676 18.1135 12.0976C18.4727 12.5325 18.8892 12.9433 19.3061 13.3226C21.4595 15.2812 23.9635 16.7255 26.7963 17.4178C25.9078 17.4887 24.972 17.4469 24.0786 17.4517C21.7018 17.4647 19.0951 17.5935 16.8394 16.7491C15.2526 16.0684 14.7418 15.2711 13.466 14.3262C11.295 12.6987 8.56652 12.0038 5.88303 12.3946C3.62341 12.7431 1.36473 14.0048 0 15.8657Z" fill="#fafafa" />
          <Path d="M8.08503 17.527C8.28371 17.5106 8.48567 17.5118 8.68503 17.5069L12.4779 17.4861C13.8577 17.4813 15.3579 17.3701 16.6976 17.7378C17.8841 18.0634 19.0905 18.6547 20.0745 19.3948C20.5417 19.7462 20.9717 20.1443 21.4432 20.4919C23.4629 21.9805 25.7791 22.8259 28.3063 22.6877C31.1378 22.5329 33.1523 21.2556 35 19.1924C34.7803 21.0176 34.3935 22.5284 33.7131 24.2363C33.4606 24.8395 32.6714 26.4566 32.26 26.9029C32.118 27.0568 31.9307 27.1664 31.7502 27.2688C27.6436 29.5984 22.4463 28.392 19.0986 25.2941C18.2648 24.5225 17.6326 23.6352 16.8938 22.7829C16.2123 21.9965 15.3973 21.2546 14.5769 20.6155C13.079 19.4385 11.3872 18.5327 9.57793 17.9393C9.08554 17.7797 8.58269 17.6668 8.08503 17.527Z" fill="#fafafa" />
          <Path d="M0.048322 19.4937C0.8229 19.3476 1.59866 19.279 2.38519 19.2426C6.3235 19.1074 10.2235 20.4706 12.9916 23.3426C13.6105 23.9848 14.1174 24.7208 14.7004 25.3928C16.1767 27.0796 18.0227 28.4014 20.094 29.2547C22.8931 30.3927 25.9837 30.5856 28.8691 29.644C29.5394 29.4252 30.1601 29.1117 30.8074 28.8374C30.4842 29.1877 30.1725 29.5534 29.8364 29.8912C28.994 30.7381 28.0392 31.5067 27.0488 32.1722C24.9367 33.6403 22.3501 34.5754 19.8158 34.937C19.2418 34.1412 18.6515 33.368 17.9537 32.6759C14.8983 29.6458 10.751 27.8311 6.49753 27.3394C5.34783 27.2064 4.17912 27.1987 3.0231 27.2041C1.45468 24.9274 0.278348 22.2756 0.048322 19.4937Z" fill="#fafafa" />
          <Path d="M15.764 35C13.6012 34.7996 11.4495 34.0555 9.54027 33.0359C7.86832 32.1429 6.41389 31.0849 5.06657 29.7495C4.91875 29.603 4.53905 29.2984 4.48045 29.1061C4.51056 29.1074 4.5406 29.1092 4.57071 29.1113C5.27281 29.1576 5.99225 29.3211 6.67378 29.4899C10.1908 30.3628 13.3606 32.2842 15.764 35Z" fill="#fafafa" />
        </Svg>
        <Text style={styles.title}>Quiz Results</Text>
      </View>

      {/* Grade Section */}
      <View style={styles.gradeContainer}>
        <Text style={styles.gradeLabel}>Grade</Text>
        <Text style={[styles.gradeValue, getGradeStyle(resultsData.performance)]}>
          {getGradeLetter(resultsData.performance)}
        </Text>
      </View>

      {/* Stats Grid */}
      <View style={styles.statsContainer}>
        <View style={styles.statBox}>
          <Text style={styles.statLabel}>Correct Answers</Text>
          <Text style={styles.statValueGreen}>
            {resultsData.correctAnswers} / {resultsData.totalQuestions}
          </Text>
        </View>
        <View style={styles.statBox}>
          <Text style={styles.statLabel}>Percentage</Text>
          <Text style={styles.statValueGreen}>{resultsData.percentage}%</Text>
        </View>
      </View>

      <View style={styles.statsContainer}>
        <View style={styles.statBox}>
          <Text style={styles.statLabel}>Time Taken</Text>
          <Text style={styles.statValue}>{formatTime(resultsData.timeTaken)}</Text>
        </View>
        <View style={styles.statBox}>
          <Text style={styles.statLabel}>Total Questions</Text>
          <Text style={styles.statValue}>{resultsData.totalQuestions}</Text>
        </View>
      </View>

      {/* Quiz Info */}
      <View style={[styles.navBox, { marginTop: 20 }]}>
        <Text style={styles.gridTitle}>Individual Scores</Text>
        {/* Navigation Grid */}
        <View style={styles.navGrid}>
          {resultsData.questionResults.map((result, index) => {
            const isCorrect = result.isCorrect;
            const buttonStyle = isCorrect
              ? [styles.navButton, styles.navButtonCorrect]
              : [styles.navButton, styles.navButtonIncorrect];
            return (
              <View key={result.questionId} style={buttonStyle}>
                <Text style={styles.navButtonText}>{index + 1}.</Text>
              </View>
            );
          })}
        </View>
      </View>

      {/* Footer */}
      <View style={styles.footer}>
        <Text style={styles.timeSubmitted}>
          Submitted On: {formatDate(resultsData.submittedAt)}
        </Text>
        <Text style={styles.quizID}>
          Quiz ID: {resultsData.quizId}
        </Text>
      </View>

      {/* Page Number */}

      <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => (
        `${pageNumber} / ${totalPages}`
      )} fixed />
    </Page>

    {/* Questions Pages */}
    {resultsData.questionResults.map((question, index) => (
      <Page key={question.questionId} size="A4" style={styles.page}>
        <View style={styles.header}>
          <Svg width="125" height="30" viewBox="0 0 163 39" fill="none" >
            <Path d="M54.9715 30.8246C54.4147 30.8246 53.7884 30.769 53.0924 30.6578C52.4242 30.5465 51.7839 30.4075 51.1715 30.2406C50.5868 30.0738 50.1275 29.893 49.7934 29.6984C49.5985 29.5872 49.4454 29.4759 49.3341 29.3647C49.2506 29.2257 49.2088 29.0032 49.2088 28.6973L49 22.1487C49 21.5925 49.181 21.3144 49.5429 21.3144C49.8491 21.3144 50.0579 21.5647 50.1693 22.0652L50.5451 23.6503C51.4916 27.6267 53.2594 29.615 55.8485 29.615C57.2404 29.615 58.3401 29.1562 59.1474 28.2385C59.9826 27.293 60.4002 25.9722 60.4002 24.2759C60.4002 22.6353 59.9687 21.1059 59.1057 19.6877C58.2705 18.2695 56.9203 16.8652 55.055 15.4749C52.9949 14.0011 51.4916 12.5829 50.5451 11.2203C49.5985 9.82995 49.1253 8.35615 49.1253 6.79893C49.1253 4.74118 49.8352 3.10053 51.255 1.877C52.7026 0.625668 54.54 0 56.7672 0C57.6023 0 58.4097 0.0973258 59.1892 0.291977C59.9687 0.486631 60.609 0.764706 61.1101 1.1262C61.2771 1.23743 61.4024 1.36257 61.4859 1.5016C61.5973 1.64064 61.653 1.82139 61.653 2.04385L61.7782 8.34225C61.7782 8.81497 61.5973 9.05134 61.2354 9.05134C60.9848 9.05134 60.8039 8.85668 60.6925 8.46738L60.4002 7.4246C59.7877 5.28342 59.1474 3.7262 58.4793 2.75294C57.839 1.75187 56.9064 1.25134 55.6814 1.25134C54.4843 1.25134 53.5239 1.64064 52.8001 2.41925C52.1041 3.19786 51.7561 4.29626 51.7561 5.71444C51.7561 6.91016 52.1458 8.05027 52.9253 9.13476C53.7048 10.2193 55.069 11.5401 57.0177 13.0973C59.1057 14.7936 60.6229 16.4342 61.5694 18.0193C62.5438 19.5765 63.031 21.2449 63.031 23.0246C63.031 24.5818 62.683 25.9444 61.987 27.1123C61.2911 28.2802 60.3306 29.1979 59.1057 29.8652C57.9086 30.5048 56.5305 30.8246 54.9715 30.8246Z" fill="#fafafa" />
            <Path d="M66.1085 39C65.3568 39 64.7582 38.7358 64.3128 38.2075C63.8674 37.707 63.6447 37.123 63.6447 36.4556C63.6447 35.9273 63.7978 35.4824 64.104 35.1209C64.4103 34.7594 64.8278 34.5786 65.3568 34.5786C65.8022 34.5786 66.1224 34.6759 66.3172 34.8706C66.5121 35.0652 66.6513 35.2877 66.7348 35.538C66.8184 35.7882 66.9019 36.0107 66.9854 36.2053C67.0689 36.4 67.2359 36.4973 67.4865 36.4973C67.7927 36.4973 68.0711 36.2749 68.3217 35.8299C68.5722 35.4128 68.9202 34.5091 69.3657 33.1187C69.644 32.2845 69.8111 31.5615 69.8668 30.9497C69.9503 30.338 69.9364 29.6845 69.825 28.9893C69.7415 28.2941 69.5327 27.446 69.1986 26.4449L64.6469 11.9711C64.452 11.3037 64.2571 10.8727 64.0623 10.6781C63.8952 10.4834 63.6168 10.3444 63.2271 10.261L62.6007 10.1358C62.2388 10.0524 62.0578 9.87166 62.0578 9.59358C62.0578 9.31551 62.2527 9.17647 62.6425 9.17647H69.5327C69.9224 9.17647 70.1173 9.31551 70.1173 9.59358C70.1173 9.89946 69.9364 10.0802 69.5744 10.1358L68.9063 10.2193C68.2382 10.3027 67.8066 10.4695 67.6118 10.7198C67.4447 10.9422 67.4587 11.3594 67.6535 11.9711L71.3283 24.1925C71.4118 24.4706 71.5371 24.6096 71.7042 24.6096C71.899 24.6096 72.0382 24.4706 72.1217 24.1925L75.6713 12.7219C75.894 11.9711 75.9496 11.415 75.8383 11.0535C75.7548 10.6642 75.365 10.4139 74.669 10.3027L73.7921 10.1358C73.4302 10.0524 73.2492 9.87166 73.2492 9.59358C73.2492 9.31551 73.4441 9.17647 73.8339 9.17647H79.1372C79.527 9.17647 79.7219 9.32941 79.7219 9.63529C79.7219 9.91337 79.5548 10.108 79.2208 10.2193L78.8449 10.3444C78.4273 10.4834 78.0794 10.7337 77.801 11.0952C77.5226 11.4567 77.2303 12.0824 76.924 12.9722L70.7019 32.3679C70.0895 34.3144 69.5327 35.7604 69.0316 36.7059C68.5583 37.6513 68.099 38.2631 67.6535 38.5412C67.2081 38.8471 66.6931 39 66.1085 39Z" fill="#fafafa" />
            <Path d="M79.2498 30.4492C78.8322 30.4492 78.6234 30.2963 78.6234 29.9904C78.6234 29.7401 78.8044 29.5733 79.1663 29.4898L79.6674 29.4064C80.252 29.2952 80.6278 29.1283 80.7949 28.9059C80.9898 28.6556 81.0872 28.2385 81.0872 27.6545V13.6396C81.0872 13.139 81.0037 12.8053 80.8366 12.6385C80.6974 12.4439 80.433 12.3187 80.0432 12.2631L79.1663 12.138C78.8044 12.1102 78.6234 11.9572 78.6234 11.6791C78.6234 11.4567 78.8461 11.3037 79.2916 11.2203C80.1546 11.0813 80.8088 10.8588 81.2542 10.5529C81.7275 10.2471 82.2147 9.87166 82.7158 9.42674C82.9663 9.17647 83.1751 9.05134 83.3422 9.05134C83.5927 9.05134 83.718 9.21818 83.718 9.55187V11.4289C83.718 11.6791 83.8015 11.846 83.9686 11.9294C84.1634 11.985 84.3722 11.9016 84.5949 11.6791C85.7085 10.6225 86.6829 9.89946 87.5181 9.51016C88.3811 9.12085 89.2859 8.9262 90.2324 8.9262C91.4852 8.9262 92.4874 9.37112 93.2391 10.261C93.9907 11.123 94.3665 12.4021 94.3665 14.0984V27.6545C94.3665 28.2385 94.4501 28.6556 94.6171 28.9059C94.812 29.1283 95.2017 29.2813 95.7863 29.3647L96.705 29.4898C97.0113 29.5455 97.1644 29.7123 97.1644 29.9904C97.1644 30.2963 96.9974 30.4492 96.6633 30.4492H89.6478C89.258 30.4492 89.0632 30.2963 89.0632 29.9904C89.0632 29.7123 89.2163 29.5455 89.5225 29.4898L90.1071 29.4064C90.6918 29.323 91.0676 29.1561 91.2346 28.9059C91.4295 28.6556 91.5269 28.2385 91.5269 27.6545V14.5572C91.5269 13.1947 91.2764 12.2353 90.7753 11.6791C90.2742 11.123 89.5643 10.8449 88.6456 10.8449C87.7547 10.8449 86.9474 11.1091 86.2235 11.6374C85.5276 12.138 84.9708 12.8193 84.5532 13.6813C84.1356 14.5155 83.9268 15.4471 83.9268 16.4759V27.6545C83.9268 28.2385 84.0103 28.6556 84.1774 28.9059C84.3722 29.1561 84.762 29.3091 85.3466 29.3647L86.4741 29.4898C86.7803 29.5455 86.9334 29.6984 86.9334 29.9487C86.9334 30.2824 86.7247 30.4492 86.3071 30.4492H79.2498Z" fill="#fafafa" />
            <Path d="M101.788 30.8246C100.619 30.8246 99.6585 30.4631 98.9068 29.7401C98.1552 28.9893 97.7794 28.0021 97.7794 26.7786C97.7794 25.5829 98.1552 24.4567 98.9068 23.4C99.6585 22.3155 100.689 21.3422 101.997 20.4802C103.305 19.6182 104.795 18.923 106.465 18.3947C106.827 18.2834 107.008 18.0471 107.008 17.6856V13.8898C107.008 12.5551 106.799 11.6096 106.382 11.0535C105.964 10.4695 105.393 10.1775 104.67 10.1775C103.974 10.1775 103.333 10.4973 102.749 11.1369C102.192 11.7487 101.788 12.7914 101.538 14.2652C101.398 15.1551 101.092 15.8086 100.619 16.2257C100.174 16.615 99.7142 16.8096 99.2409 16.8096C98.4614 16.8096 98.0717 16.4203 98.0717 15.6417C98.0717 14.8353 98.2944 14.0428 98.7398 13.2642C99.2131 12.4578 99.8255 11.7348 100.577 11.0952C101.329 10.4278 102.15 9.89946 103.041 9.51016C103.932 9.12085 104.823 8.9262 105.714 8.9262C108.47 8.9262 109.848 10.5251 109.848 13.723V26.4866C109.848 27.6545 110.14 28.2385 110.725 28.2385C111.087 28.2385 111.421 28.0021 111.727 27.5294C112.033 27.0289 112.186 26.1947 112.186 25.0267C112.186 24.5818 112.367 24.3594 112.729 24.3594C113.063 24.3594 113.23 24.5957 113.23 25.0684C113.23 27.0984 112.868 28.5722 112.144 29.4898C111.448 30.3797 110.655 30.8246 109.764 30.8246C109.096 30.8246 108.567 30.5604 108.177 30.0321C107.788 29.4759 107.523 28.8225 107.384 28.0717C107.356 27.7936 107.231 27.6545 107.008 27.6545C106.813 27.6267 106.618 27.7519 106.423 28.0299C105.755 28.9476 105.073 29.6428 104.377 30.1155C103.681 30.5882 102.818 30.8246 101.788 30.8246ZM102.916 28.9059C103.64 28.9059 104.308 28.6556 104.92 28.1551C105.533 27.6267 106.034 26.9315 106.423 26.0695C106.813 25.2075 107.008 24.2342 107.008 23.1497V20.1048C107.008 19.5765 106.716 19.4235 106.131 19.646C104.433 20.2578 103.111 21.1059 102.164 22.1904C101.245 23.2471 100.786 24.5262 100.786 26.0278C100.786 27.9465 101.496 28.9059 102.916 28.9059Z" fill="#fafafa" />
            <Path d="M113.749 39C113.331 39 113.122 38.8471 113.122 38.5412C113.122 38.2353 113.303 38.0684 113.665 38.0406L114.25 37.9572C114.834 37.8738 115.21 37.707 115.377 37.4567C115.572 37.2064 115.669 36.7893 115.669 36.2053V13.6396C115.669 13.139 115.586 12.8053 115.419 12.6385C115.28 12.4439 115.015 12.3187 114.626 12.2631L113.749 12.138C113.387 12.1102 113.206 11.9572 113.206 11.6791C113.206 11.4567 113.428 11.3037 113.874 11.2203C114.737 11.0813 115.391 10.8588 115.837 10.5529C116.31 10.2471 116.797 9.87166 117.298 9.42674C117.549 9.17647 117.757 9.05134 117.924 9.05134C118.175 9.05134 118.3 9.21818 118.3 9.55187V10.8449C118.3 11.0396 118.384 11.1786 118.551 11.262C118.718 11.3176 118.913 11.2342 119.135 11.0118L119.595 10.5529C120.152 9.99679 120.722 9.59358 121.307 9.34331C121.892 9.06524 122.56 8.9262 123.311 8.9262C124.592 8.9262 125.719 9.35722 126.694 10.2193C127.696 11.0535 128.476 12.2214 129.032 13.723C129.617 15.2246 129.909 16.9904 129.909 19.0203C129.909 21.3283 129.547 23.3722 128.824 25.1519C128.1 26.9315 127.098 28.3219 125.817 29.323C124.564 30.3241 123.117 30.8246 121.474 30.8246C120.639 30.8246 119.901 30.6717 119.261 30.3658C118.76 30.1433 118.509 30.2963 118.509 30.8246V36.2053C118.509 36.7893 118.593 37.1786 118.76 37.3733C118.955 37.5957 119.344 37.7487 119.929 37.8321L121.474 38.0406C121.78 38.0963 121.933 38.2492 121.933 38.4995C121.933 38.8332 121.725 39 121.307 39H113.749ZM121.599 29.7818C123.158 29.7818 124.411 28.8642 125.358 27.0289C126.332 25.1936 126.819 22.7187 126.819 19.6043C126.819 16.7401 126.402 14.5572 125.566 13.0556C124.731 11.554 123.548 10.8032 122.017 10.8032C121.07 10.8032 120.249 11.1925 119.553 11.9711C118.857 12.7497 118.509 13.8342 118.509 15.2246V25.7358C118.509 26.9872 118.787 27.9743 119.344 28.6973C119.929 29.4203 120.681 29.7818 121.599 29.7818Z" fill="#fafafa" />
            <Path d="M135.811 30.8246C135.171 30.8246 134.489 30.7412 133.765 30.5743C133.041 30.4353 132.457 30.2545 132.011 30.0321C131.761 29.893 131.635 29.6567 131.635 29.323L131.51 24.6513C131.51 24.1786 131.691 23.9422 132.053 23.9422C132.359 23.9422 132.568 24.1647 132.679 24.6096C133.153 26.584 133.723 27.9326 134.392 28.6556C135.088 29.3786 135.923 29.7401 136.897 29.7401C137.704 29.7401 138.373 29.4342 138.901 28.8225C139.43 28.1829 139.695 27.307 139.695 26.1947C139.695 25.0824 139.389 24.0952 138.776 23.2332C138.164 22.3711 137.134 21.4257 135.686 20.3968C134.238 19.4235 133.181 18.4503 132.512 17.477C131.844 16.4759 131.51 15.3914 131.51 14.2235C131.51 12.6385 132.067 11.3594 133.181 10.3861C134.294 9.41283 135.77 8.9262 137.607 8.9262C138.164 8.9262 138.707 8.99572 139.236 9.13476C139.765 9.24599 140.238 9.44064 140.655 9.71872C140.906 9.88556 141.031 10.108 141.031 10.3861L141.115 14.9743C141.115 15.3914 140.948 15.6 140.614 15.6C140.419 15.6 140.28 15.5444 140.196 15.4332C140.112 15.2941 140.043 15.1273 139.987 14.9326C139.43 13.1251 138.874 11.8738 138.317 11.1786C137.76 10.4556 137.078 10.0941 136.271 10.0941C135.547 10.0941 134.948 10.3444 134.475 10.8449C134.002 11.3455 133.765 11.9711 133.765 12.7219C133.765 13.6952 134.057 14.5433 134.642 15.2663C135.227 15.9893 136.285 16.8791 137.816 17.9358C139.208 18.9369 140.252 20.0214 140.948 21.1893C141.671 22.3294 142.033 23.5807 142.033 24.9433C142.033 26.723 141.463 28.1551 140.321 29.2396C139.18 30.2963 137.677 30.8246 135.811 30.8246Z" fill="#fafafa" />
            <Path d="M150.369 30.8246C149.033 30.8246 147.836 30.3797 146.778 29.4898C145.72 28.6 144.871 27.3487 144.231 25.7358C143.618 24.0952 143.312 22.2043 143.312 20.0631C143.312 17.8663 143.632 15.9337 144.272 14.2652C144.913 12.5968 145.79 11.2898 146.903 10.3444C148.017 9.39893 149.256 8.9262 150.62 8.9262C152.262 8.9262 153.585 9.60749 154.587 10.9701C155.617 12.3048 156.132 14.4877 156.132 17.5187C156.132 18.4364 155.784 18.8952 155.088 18.8952H147.154C146.597 18.8952 146.319 19.215 146.319 19.8545C146.319 22.8021 146.75 25.0128 147.613 26.4866C148.476 27.9604 149.576 28.6973 150.912 28.6973C151.97 28.6973 152.833 28.3219 153.501 27.5711C154.169 26.8203 154.712 25.5551 155.13 23.7754C155.213 23.4695 155.394 23.3166 155.673 23.3166C156.007 23.3166 156.132 23.5947 156.048 24.1508C155.603 26.6257 154.893 28.3636 153.919 29.3647C152.944 30.338 151.761 30.8246 150.369 30.8246ZM147.028 17.8524H151.246C152.582 17.8524 153.251 17.1572 153.251 15.7668C153.251 13.9594 153.028 12.5412 152.582 11.5123C152.137 10.4834 151.469 9.96898 150.578 9.96898C149.492 9.96898 148.574 10.5947 147.822 11.846C147.098 13.0973 146.625 14.877 146.402 17.185C146.346 17.6299 146.555 17.8524 147.028 17.8524Z" fill="#fafafa" />
            <Path d="M160.829 30.8246C160.216 30.8246 159.687 30.6299 159.242 30.2406C158.824 29.8235 158.615 29.2813 158.615 28.6139C158.615 27.9743 158.824 27.4599 159.242 27.0706C159.687 26.6535 160.216 26.4449 160.829 26.4449C161.385 26.4449 161.886 26.6535 162.332 27.0706C162.777 27.4599 163 27.9743 163 28.6139C163 29.2813 162.777 29.8235 162.332 30.2406C161.886 30.6299 161.385 30.8246 160.829 30.8246Z" fill="#fafafa" />
            <Path d="M30.6001 5.86153C30.2125 5.86755 29.8057 5.80538 29.422 5.75004C26.1974 5.28506 23.0102 3.66025 20.6352 1.44723C20.1584 1.00292 19.6758 0.522928 19.2852 0C23.7036 0.576102 27.6147 2.50947 30.6001 5.86153Z" fill="#fafafa" />
            <Path d="M4.17509 6.22432C4.56644 5.74935 5.0001 5.33017 5.44367 4.90515C8.0815 2.36788 11.4259 0.691818 15.035 0.0984678C15.0583 0.0940004 15.0902 0.0871127 15.1134 0.0866163C15.2781 0.083514 15.4632 0.451636 15.5648 0.588635C16.2331 1.50153 17.0011 2.33673 17.8547 3.07881C21.7124 6.44334 26.9367 8.03837 32.0176 7.68644C33.627 9.97813 34.63 12.641 34.9327 15.4264C31.2297 16.116 27.9646 15.8397 24.6964 13.8274C23.558 13.0996 22.468 12.2462 21.6 11.2018C21.1477 10.6573 20.7707 10.063 20.2988 9.53059C18.6779 7.71666 16.6289 6.33861 14.339 5.52251C10.8093 4.29145 7.50721 4.60658 4.17509 6.22432Z" fill="#fafafa" />
            <Path d="M0 15.8657C0.0117088 15.4471 0.102654 15.0108 0.173588 14.5986C0.521631 12.5032 1.29559 10.5016 2.44745 8.71784C2.59062 8.49404 2.7188 8.24585 2.88464 8.03949C3.31198 7.50763 5.07636 6.90149 5.74407 6.73887C6.2084 6.62576 6.67892 6.56284 7.1544 6.52245C7.65887 6.4601 8.22491 6.48957 8.7318 6.52102C11.8842 6.7166 14.6465 8.28166 16.8155 10.5114C17.2968 11.0063 17.6758 11.5676 18.1135 12.0976C18.4727 12.5325 18.8892 12.9433 19.3061 13.3226C21.4595 15.2812 23.9635 16.7255 26.7963 17.4178C25.9078 17.4887 24.972 17.4469 24.0786 17.4517C21.7018 17.4647 19.0951 17.5935 16.8394 16.7491C15.2526 16.0684 14.7418 15.2711 13.466 14.3262C11.295 12.6987 8.56652 12.0038 5.88303 12.3946C3.62341 12.7431 1.36473 14.0048 0 15.8657Z" fill="#fafafa" />
            <Path d="M8.08503 17.527C8.28371 17.5106 8.48567 17.5118 8.68503 17.5069L12.4779 17.4861C13.8577 17.4813 15.3579 17.3701 16.6976 17.7378C17.8841 18.0634 19.0905 18.6547 20.0745 19.3948C20.5417 19.7462 20.9717 20.1443 21.4432 20.4919C23.4629 21.9805 25.7791 22.8259 28.3063 22.6877C31.1378 22.5329 33.1523 21.2556 35 19.1924C34.7803 21.0176 34.3935 22.5284 33.7131 24.2363C33.4606 24.8395 32.6714 26.4566 32.26 26.9029C32.118 27.0568 31.9307 27.1664 31.7502 27.2688C27.6436 29.5984 22.4463 28.392 19.0986 25.2941C18.2648 24.5225 17.6326 23.6352 16.8938 22.7829C16.2123 21.9965 15.3973 21.2546 14.5769 20.6155C13.079 19.4385 11.3872 18.5327 9.57793 17.9393C9.08554 17.7797 8.58269 17.6668 8.08503 17.527Z" fill="#fafafa" />
            <Path d="M0.048322 19.4937C0.8229 19.3476 1.59866 19.279 2.38519 19.2426C6.3235 19.1074 10.2235 20.4706 12.9916 23.3426C13.6105 23.9848 14.1174 24.7208 14.7004 25.3928C16.1767 27.0796 18.0227 28.4014 20.094 29.2547C22.8931 30.3927 25.9837 30.5856 28.8691 29.644C29.5394 29.4252 30.1601 29.1117 30.8074 28.8374C30.4842 29.1877 30.1725 29.5534 29.8364 29.8912C28.994 30.7381 28.0392 31.5067 27.0488 32.1722C24.9367 33.6403 22.3501 34.5754 19.8158 34.937C19.2418 34.1412 18.6515 33.368 17.9537 32.6759C14.8983 29.6458 10.751 27.8311 6.49753 27.3394C5.34783 27.2064 4.17912 27.1987 3.0231 27.2041C1.45468 24.9274 0.278348 22.2756 0.048322 19.4937Z" fill="#fafafa" />
            <Path d="M15.764 35C13.6012 34.7996 11.4495 34.0555 9.54027 33.0359C7.86832 32.1429 6.41389 31.0849 5.06657 29.7495C4.91875 29.603 4.53905 29.2984 4.48045 29.1061C4.51056 29.1074 4.5406 29.1092 4.57071 29.1113C5.27281 29.1576 5.99225 29.3211 6.67378 29.4899C10.1908 30.3628 13.3606 32.2842 15.764 35Z" fill="#fafafa" />
          </Svg>
          <Text style={styles.title}>Quiz Results</Text>
        </View>
        {/* Question Container */}
        <View style={styles.questionContainer}>
          {/* Question Header */}
          <View style={styles.questionHeader}>
            <Text style={styles.questionNumber}>Question {index + 1}.</Text>
            <Text style={styles.questionTopic}>Topic: {question.topic}</Text>
          </View>

          <View style={styles.separator} />
          {/* Question Text */}
          <Text style={styles.questionText}>{question.question}</Text>

          <View style={styles.optionsContainer}>
            {question.options.map((option, optionIndex) => {
              const isUserAnswer = question.userAnswer !== null && optionIndex === question.userAnswer;
              const isCorrectAnswer = optionIndex === question.correctAnswer;
              const isIncorrectUserAnswer = isUserAnswer && !question.isCorrect;

              let optionStyle = styles.optionNeutral;
              if (isCorrectAnswer) {
                optionStyle = styles.optionCorrect;
              } else if (isIncorrectUserAnswer) {
                optionStyle = styles.optionIncorrect;
              }

              return (
                <Text key={optionIndex} style={[styles.option, optionStyle]}>
                  {option}
                </Text>
              );
            })}
          </View>

          {/* Answer Information */}
          <View style={styles.answerInfo}>
            <View style={styles.answerRow}>
              <Text style={styles.answerLabel}>Your Answer:</Text>
              <Text style={[
                styles.answerValue,
                question.userAnswer === null
                  ? styles.answerNotAttempted
                  : question.isCorrect
                    ? styles.answerCorrect
                    : styles.answerIncorrect
              ]}>
                {question.userAnswer === null
                  ? "Not Attempted"
                  : question.isCorrect
                    ? "Correct"
                    : "Incorrect"}
              </Text>
            </View>

            {(question.userAnswer === null || !question.isCorrect) && (
              <View style={styles.correctAnswerRow}>
                <Text style={styles.answerLabel}>Correct Answer:</Text>
                <Text style={[styles.correctAnswerValue, styles.answerCorrect]}>
                  {question.options[question.correctAnswer]}
                </Text>
              </View>
            )}
          </View>

          {/* Explanation */}
          <View style={styles.explanation}>
            <View style={styles.explanationHeader}>
              <Svg width="16" height="16" viewBox="0 0 72 72"
                fill="none"
              >
                <Path d="M62,36c0,3.809-2.343,7.067-5.664,8.424c1.389,3.308,0.742,7.268-1.952,9.961c-2.693,2.693-6.654,3.341-9.961,1.952	C43.067,59.657,39.809,62,36,62s-7.067-2.343-8.424-5.664c-3.307,1.389-7.268,0.742-9.961-1.952	c-2.693-2.693-3.341-6.654-1.952-9.961C12.343,43.067,10,39.809,10,36c0-3.809,2.343-7.067,5.664-8.424	c-1.389-3.308-0.742-7.268,1.952-9.961c2.693-2.693,6.654-3.341,9.961-1.951C28.933,12.342,32.191,10,36,10s7.067,2.342,8.424,5.664	c3.307-1.389,7.268-0.742,9.961,1.951c2.693,2.693,3.341,6.654,1.952,9.961C59.657,28.933,62,32.191,62,36z M46.018,31.464	c0.901-1.391,0.504-3.248-0.887-4.149c-1.39-0.901-3.247-0.503-4.148,0.886l-7.134,11.011l-3.097-3.519	c-1.094-1.243-2.99-1.364-4.233-0.271c-1.244,1.095-1.365,2.99-0.271,4.234l5.713,6.493c0.571,0.649,1.394,1.018,2.252,1.018	c0.073,0,0.146-0.002,0.22-0.008c0.937-0.069,1.787-0.572,2.298-1.36L46.018,31.464z" fill='#60a5fa'></Path>
              </Svg>             
              <Text style={styles.explanationTitle}>Explanation</Text></View>
            <Text style={styles.explanationText}>{question.explanation}</Text>
          </View>
        </View>

        <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => (
          `${pageNumber} / ${totalPages}`
        )} fixed />
      </Page>
    ))}
  </Document>
);
